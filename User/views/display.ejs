<!DOCTYPE html>
 <html>
 <head>
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200&display=swap" rel="stylesheet">
   <script>
     document.getElementById('queryID').addEventListener("click", async (e) => {
      e.preventDefault();
      const rawResponse = await fetch('/display', {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ queryid: document.getElementById('queryid').value })
      });
      const content = await rawResponse.json();
      if (content.status == 'true') {
        window.location.href = "/display"
      }
      else {
        console.log("Failed please try again")
        window.location.href = "/display"

      }
    })

    document.getElementById('emailID').addEventListener("click", async (e) => {
      e.preventDefault();
      const rawResponse = await fetch('/display', {
        method: 'POST',
        headers: {
          'Accept': 'application/json',
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ emailid: document.getElementById('emailid').value })
      });
      const content = await rawResponse.json();
      if (content.status == 'true') {
        window.location.href = "/display"
      }
      else {
        console.log("Failed please try again")
        window.location.href = "/display"

      }
    })
   </script>

   <title>Welcome to my blog</title>
   <style>
    body{
      background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQKPQnPWj3Z2MYReupjjX_ton6QHL3mIjac0g&usqp=CAU');
      background-repeat: no-repeat;
      background-size: cover;
      text-align: center;
    }
    img {
      border-radius: 50%;
    }

 table,th, td {
  border: 1px solid black;
  border-collapse: collapse;
  text-align: center;
  left: 10%;
 }
.container{
  width: auto;

}
  .button {
  background-color: rgb(249, 49, 49);
  border: none;
  color: white;
  padding: 10px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 2px 2px;
  cursor: pointer;
  position: center;
  border-radius: 10cm;

  }
  .form{
    padding: auto;
    text-align: center;
  }
  .fa-home {
            color: blanchedalmond;
            font-size: 20px;
            background: #000;
            padding: 15px;
            border-radius: 30px;
        }

        .card {
            background-color: aliceblue;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            max-width: 300px;
            margin: auto;
            text-align: center;
            font-family: arial;
        }
    </style>
 </head>
 <body>

   <h1>Users</h1>
   <hr>
   <div class="container">
   <table class="table">
    <thead>
      <tr>

        <th scope="col">#</th>
        <th scope="col">id</th>
        <th scope="col">Profile Image</th>
        <th scope="col">First Name</th>
        <th scope="col">Last Name</th>
        <th scope="col">User Name</th>
        <th scope="col">Email</th>
        <th scope="col">Phone number</th>
        <th scope="col">Bio</th>
     
      </tr>
    </thead>
    <tbody>
      <% if(users.length){
     
      for(var i = 0; i< users.length; i++) {%>  
      <tr>
        <th scope="row"><%= (i+1) %></th>
        <td><%= users[i]._id%></td>
        <td>
          <% if(users[i].image){ %>
          <img src="./uploads/<%=users[i].image%>" alt="profile image" width="50">
          <%} else{ %>
            <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460__480.png" alt="profile image" width="50" >
          <%} %>
          
          </td>

        <td><%= users[i].firstname%></td>
        <td><%= users[i].lastname%></td>
        <td><%= users[i].username%></td>
        <td><%= users[i].email%></td>
        <td><%= users[i].phone%></td>
        <td><%= users[i].bio%></td>
        
      </tr>
      <% }
               
       }else{ %>
           <tr>
              <td colspan="3">No user</td>
           </tr>
        <% } %>    
      
    </tbody>
    </table>
</div>
    <hr>
<div class="form">
    <form action=" " method="post">
      <input id="queryid" placeholder="Enter the ids of resolved queries" name="queryname" />
      <button type="submit" id="queryID" class="button button3">DELETE</button>
    </form>
    <form action=" " method="post"><input id="emailid" placeholder="Enter the ids of resolved queries" name="emailname" />
      <button type="submit" id="emailID" class="button button3">SEND EMAIL</button>
    </form>
    <br>
    <a href="/"><i class="fa fa-home">Home</i></a>
</div>
  </body>
</html>